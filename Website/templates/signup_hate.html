{% load static %}
<!doctype html>
<html lang="en" class="h-100">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.88.1">
    <title>Sticky Footer Navbar Template · Bootstrap v5.1</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.1/examples/sticky-footer-navbar/">



    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <link href="https://unpkg.com/@yaireo/tagify/dist/tagify.css" rel="stylesheet" type="text/css" />


    <link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }

        /* Custom page CSS
        -------------------------------------------------- */
        /* Not required for template or sticky footer method. */

        main>.container {
            padding: 60px 15px 0;
        }
    </style>
{% include "header.html" %}
</head>


<div class="container">
    <body class="d-flex flex-column h-100">
            <br>
            <h1>알레르기가 있거나 먹기 싫은 재료를 입력하세요</h1>
            <p>재료를 입력하시면 입력하신 재료는 제외하고 레시피를 추천해 드립니다 &#128512;</p>
            <br>
            <br>
            <br>
            

            <!-- Begin page content -->
            <main class="flex-shrink-0">
                {% block contents %}
                {% endblock %}
                <input name='input-custom-dropdown' class='some_class_name' placeholder='ex) 돼지고기,소고기...' id='sample'>
                <input value='css, html, javascript'>
            </main> 

        
        
            <script src="/docs/5.1/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
                crossorigin="anonymous"></script>

            <script src="https://unpkg.com/@yaireo/tagify"></script>

            <script src="https://unpkg.com/@yaireo/tagify/dist/tagify.polyfills.min.js"></script>

            <script>
                var baseUrl = window.location.origin;
                var input = document.querySelector('input#sample'),
                    // init Tagify script on the above inputs
                    tagify = new Tagify(input, {
                        whitelist: ["A# .NET", "A# (Axiom)", "A-0 System", "A+", "A++", "ABAP", "ABC", "ABC ALGOL", "ABSET", "ABSYS", "ACC", "Accent", "Ace DASL", "ACL2", "Avicsoft", "ACT-III", "Action!", "ActionScript", "Ada", "Adenine", "Agda", "Agilent VEE", "Agora", "AIMMS", "Alef", "ALF", "ALGOL 58", "ALGOL 60", "ALGOL 68", "ALGOL W", "Alice", "Alma-0", "AmbientTalk", "Amiga E", "AMOS", "AMPL", "Apex (Salesforce.com)", "APL", "AppleScript", "Arc", "ARexx", "Argus", "AspectJ", "Assembly language", "ATS", "Ateji PX", "AutoHotkey", "Autocoder", "AutoIt", "AutoLISP / Visual LISP", "Averest", "AWK", "Axum", "Active Server Pages", "ASP.NET", "B", "Babbage", "Bash", "BASIC", "bc", "BCPL", "BeanShell", "Batch (Windows/Dos)", "Bertrand", "BETA", "Bigwig", "Bistro", "BitC", "BLISS", "Blockly", "BlooP", "Blue", "Boo", "Boomerang", "Bourne shell (including bash and ksh)", "BREW", "BPEL", "B", "C--", "C++ – ISO/IEC 14882", "C# – ISO/IEC 23270", "C/AL", "Caché ObjectScript", "C Shell", "Caml", "Cayenne", "CDuce", "Cecil", "Cesil", "Céu", "Ceylon", "CFEngine", "CFML", "Cg", "Ch", "Chapel", "Charity", "Charm", "Chef", "CHILL", "CHIP-8", "chomski", "ChucK", "CICS", "Cilk", "Citrine (programming language)", "CL (IBM)", "Claire", "Clarion", "Clean", "Clipper", "CLIPS", "CLIST", "Clojure", "CLU", "CMS-2", "COBOL – ISO/IEC 1989", "CobolScript – COBOL Scripting language", "Cobra", "CODE", "CoffeeScript", "ColdFusion", "COMAL", "Combined Programming Language (CPL)", "COMIT", "Common Intermediate Language (CIL)", "Common Lisp (also known as CL)", "COMPASS", "Component Pascal", "Constraint Handling Rules (CHR)", "COMTRAN", "Converge", "Cool", "Coq", "Coral 66", "Corn", "CorVision", "COWSEL", "CPL", "CPL", "Cryptol", "csh", "Csound", "CSP", "CUDA", "Curl", "Curry", "Cybil", "Cyclone", "Cython", "Java", "Javascript", "M2001", "M4", "M#", "Machine code", "MAD (Michigan Algorithm Decoder)", "MAD/I", "Magik", "Magma", "make", "Maple", "MAPPER now part of BIS", "MARK-IV now VISION:BUILDER", "Mary", "MASM Microsoft Assembly x86", "MATH-MATIC", "Mathematica", "MATLAB", "Maxima (see also Macsyma)", "Max (Max Msp – Graphical Programming Environment)", "Maya (MEL)", "MDL", "Mercury", "Mesa", "Metafont", "Microcode", "MicroScript", "MIIS", "Milk (programming language)", "MIMIC", "Mirah", "Miranda", "MIVA Script", "ML", "Model 204", "Modelica", "Modula", "Modula-2", "Modula-3", "Mohol", "MOO", "Mortran", "Mouse", "MPD", "Mathcad", "MSIL – deprecated name for CIL", "MSL", "MUMPS", "Mystic Programming L"],
                        maxTags: 10,
                        dropdown: {
                            maxItems: 20,           // <- mixumum allowed rendered suggestions
                            classname: "tags-look", // <- custom classname for this dropdown, so it could be targeted
                            enabled: 0,             // <- show suggestions on focus
                            closeOnSelect: false    // <- do not hide the suggestions dropdown once an item has been selected
                        }
                    })

                /* Event Listner */

                tagify.on('add', onAddTag)
                    .on('remove', onRemoveTag)
                    .on('input', onInput)
                    .on('edit', onTagEdit)
                    .on('invalid', onInvalidTag)
                    .on('click', onTagClick)
                    .on('focus', onTagifyFocusBlur)
                    .on('blur', onTagifyFocusBlur)
                    .on('dropdown:hide dropdown:show', e => console.log(e.type))
                    .on('dropdown:select', onDropdownSelect);




                // tag added callback
                function onAddTag(e) {
                    console.log("onAddTag: ", e.detail);
                    console.log("original input value: ", inputElm.value)
                    tagify.off('add', onAddTag) // exmaple of removing a custom Tagify event
                }

                // tag remvoed callback
                function onRemoveTag(e) {
                    console.log("onRemoveTag:", e.detail, "tagify instance value:", tagify.value)
                }

                function getIngrementByText(text) {
                    return fetch(baseUrl+"/api/ingredient/?ingredient=" + text);
                }


                // on character(s) added/removed (user is typing/deleting)
                function onInput(e) {
                    // input 태그에 글자가 입력되었을 때 발생하는 이벤트 
                    console.log(e);
                    console.log("onInput: ", e.detail);
                    tagify.whitelist = null; // reset current whitelist
                    tagify.loading(true) // show the loader animation

                    // get new whitelist from a delayed mocked request (Promise)
                    getIngrementByText(e.detail.value).then(function (resp) {
                        return resp.json();
                    }).then(function (data) {
                        var whiteList = data.map(function (item) {
                            return item.fields.ingredients;
                        })
                        console.log(data);
                        console.log(whiteList)
                        tagify.settings.whitelist = whiteList;
                        tagify.loading(false).dropdown.show(e.detail.value);
                    })

                    //             fields:
                    // ingredients: "마늘잎"
                    // [[Prototype]]: Object
                    // model: "home.ingredient"
                    // pk: 26

                    // mockAjax()
                    //     .then(function (result) {
                    //         tagify.settings.whitelist = result.concat(tagify.value) // add already-existing tags to the new whitelist array

                    //         tagify
                    //             .loading(false)
                    //             // render the suggestions dropdown.
                    //             .dropdown.show(e.detail.value);
                    //     })
                    //     .catch(err => tagify.dropdown.hide())
                }

                function onTagEdit(e) {
                    console.log("onTagEdit: ", e.detail);
                }

                // invalid tag added callback
                function onInvalidTag(e) {
                    console.log("onInvalidTag: ", e.detail);
                }

                // invalid tag added callback
                function onTagClick(e) {
                    console.log(e.detail);
                    console.log("onTagClick: ", e.detail);
                }

                function onTagifyFocusBlur(e) {
                    console.log(e.type, "event fired")
                    tagify.whitelist = null; // reset current whitelist
                    tagify.loading(true) // show the loader animation

                    // get new whitelist from a delayed mocked request (Promise)
                    getIngrementByText('').then(function (resp) {
                        return resp.json();
                    }).then(function (data) {
                        var whiteList = data.map(function (item) {
                            return item.fields.ingredients;
                        })
                        console.log(data);
                        console.log(whiteList)
                        tagify.settings.whitelist = whiteList;
                        tagify.loading(false).dropdown.show(e.detail.value);
                    })
                }

                function onDropdownSelect(e) {
                    console.log("onDropdownSelect: ", e.detail)
                }
            </script>
        </div>
        
    </body>
</div>

{% include "footer.html" %}
</html>